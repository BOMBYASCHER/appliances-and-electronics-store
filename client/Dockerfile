FROM node:20-alpine AS build
WORKDIR /app
COPY package.json .
RUN npm install
COPY . .
ARG VITE_APPLICATION_PROFILE=development
ARG VITE_SERVER_URL=http://localhost:4040/
ENV VITE_APPLICATION_PROFILE=$VITE_APPLICATION_PROFILE
ENV VITE_SERVER_URL=$VITE_SERVER_URL
RUN npm run build
EXPOSE 5173
CMD ["npm", "run", "preview"]
